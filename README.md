# System Design социальной сети для курса по System Design

https://balun.courses/courses/system_design

## Бизнес-требования

У бизнеса **есть четкое понимание функциональности**, которая эта социальная сеть должна будет предоставлять в будущем:

- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

Что касается будущей аудитории социальной сети - у бизнеса есть огромные средства для рекламы и продвижения социальной сети, поэтому пользовательская база будет постепенно линейно расти и предполагается, что через год достигнет примерно 10 000 000 уникальных пользователей в день, после чего также будет продолжать расти. Бизнес пока нацелен  только на аудиторию стран СНГ (на зарубежный рынок выходить планов нет). Будущая система должна быть очень надежной, а также, чтобы с ней было удобно взаимодействовать, используя мобильные устройства и браузер.

## Функциональные тебования

### Регистрация, авторизация
  - Пользователи регистрируются и авторизуются в приложении через Google oauth
  - При регистрации/авторизации в сервисе сохраняется/обновляется аватар пользователя

### Публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия
  - Создание постов со следующим составом полей данных:
    - Заголовок 
    - Описание 
    - Фотографии
    - Географические кординаты (широта, долгота)
  - Созданному посту присваивается статус "Черновик"
  - Пользователь может опубликовать пост (статус "Опубликован")
  - Пользователь может снять пост с публикации (статус "Черновик")
  - Пользователь может просматривать спсиок своих постов (для прсомотра доступны ипосты с любым статусом) с фильтрацией по статусу, с пагинацией (бесконечный скролл)
  - Пользователь может удалить пост
  - Опубликованные посты доступны для просмотра только зарегистрированными пользователями в ленте постов. Сортировка - по дате создания, сначала новые. Бесконечный скролл.
  - При просмотре в ленте выводится следующая информация по постам:
     - Заголовок
     - Описание 
     - Фотографии 
     - Географические кординаты
     - Дата/время создания
     - Дата/время обновления
     - Имя и аватар автора
     - Количетво лайков и дислайков
     - Количество комментариев
  - По клику на пост в ленте должна открываться страница поста. На ней кроме информации из предыдущего пункта должны отображаться комментарии пользователей (текст, имя и аватар автора, дата создания и обновления). Сортировка - по дате создания, сначала новые. Бесконечный скролл.
      

### Оценка и комментарии постов других путешественников
  - Пользователи могут оценить (поставить лайк или дислайк) на опубликованные посты других пользователей.
  - Пользователи могут создавать коментарии к опубликованным постам.
  - Пользователи могут редактировать и удалять свои комментарии.
  - Автор поста может удалять любые комментарии к своему посту.
  - Комментарий представляет собой текстовое сообщение длиной не более 1000 символов.

### Подписка на других путешественников, чтобы следить за их активностью
 - Пользователи могут подписаться или отписаться от других участников
 - Пользователь может при просмотре ленты выбрать фильтр "только избранные" - при выборе данного фильтра будут отображаться только посты тех пользователей на которых он подписан
 - Пользователь может просматривать список пользователей на которых он подписан

### Требования к интерфейсу
 - адаптивный интерфейс (поддержка десктопов, планшетов и мобильных устройств)
 - язык интерфейса - русский (мультиязычность не планируется)

## Нефункциональные тебования

### Общие требования
 - DAU - 10 000 000 (10 000 000 изначально + предполагается быстрый рост)
 - аудитория стран СНГ
 - данные будем хранить всегда
 - сезонность: активность возрастает в летний и зимний период

### Активность пользователей
 - регистрация: 100 000 в день
 - авторизация: 10 000 000 в день
 - среднее количество публикуемых пользователем постов: 3 в день
 - среднее количество удаляемых пользователем постов: 2 в месяц
 - среднее количество редактирвоаний постов пользователем: 10 в день
 - среднее колитчество комментариев от одного пользователя: 20 в день
 - среднее количество лайков и дислайков одним пользователем: 100 в день
 - среднее количество просмотров первой страницы ленты одним пользователем: 20 в день
 - среднее количество просмотров второй страницы ленты одним пользователем: 10 в день
 - среднее количество просмотров других страницы ленты одним пользователем: 2 в день
 - среднее количество просмотров первой страницы ленты избранных одним пользователем: 100 в день
 - среднее количество просмотров второй страницы ленты избранных одним пользователем: 50 в день
 - среднее количество просмотров других страницы ленты избранных одним пользователем: 5 в день
 - среднее количество просмотров страниц постов пользователем: 200 в день

### Лимиты
 -  Посты:
       - Заголовок (длина от 10 до 200 символов)
       - Описание (длина от 10 до 20000 символов)
       - Фотографии (jpg/png) - от 1 до 10 штук, размер каждой фотографии не более 10 Мб

### Требования к безопасности
 - шифрование трафика (https)
 - защита OWASP топ-10 уязвимостей

## Расчет нагрузки
 - rps на чтение: 45 000
 - rps на запись: 15 500

расчет приведен в [xlsx-файле](load-calc.xlsx)